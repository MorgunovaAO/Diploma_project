# 3.3 Тестирование совместимости  

**Кросс-платформенное тестирование** или **тестирование совместимости** проводится, чтобы убедиться, что приложение совместимо с разными браузерами, различными оболочками и аппаратным обеспечением устройства. 

### В ходе тестирования совместимости проверяется: 

* *Совместимость с браузерами:* Firefox, Chrome, Safari — это минимальный набор): анимация, верстка, шрифты, уведомления и т.д. Java Script код работает в разных браузерах. 

* *Совместимость с операционными системами* (Windows, Mac, Linux) 

* *Просмотр на мобильных устройствах*

## Движок

**Браузер** — это специальная программа, которая отображает пользователю веб-страницы. Она позволяет искать информацию в интернете, просматривать сайты, скачивать файлы любого формата, загружать аудио и видеофайлы.  

Но с помощью чего она это делает? В браузере существует **движок** - специальный компонент, которые отвечает **за отрисовку HTML и Java Script кода**.

Браузер запрашивает определенную информацию у сервера. Сервер отвечает набором каких-то параметров и значений. Соответственно, эти параметры и значения нужно как-то интерпретировать пользователю, а не просто вывести страницу с набором символов. **Движок служит нам, чтобы красиво отображать веб-страницы: анимацию, шрифты и пр.**  

У современных браузеров два движка: для разметки (HTML) и для стилей (CSS). 

### Браузеры построены на популярных движках: 

* **Blink**: Chrome, Yandex, Opera, Edge 

* **Gecko**: FireFox, Tor 

* **WebKit**: Safari 

Поскольку браузеры Chrome, Yandex, Opera, Edge работают на одном движке, то *нет необходимости проверять каждый из них отдельно* - достаточно проверить **один** (как в одном классе эквивалентности).  

## Mobile WEB

Мы рассмотрели особенности WEB. А теперь немного поговорим о мобильных версиях сайтов - Mobile WEB. В чем их отличие?  

**Веб-приложение (WEB)** – приложение, не требующее установки, все обновления происходят на сервере, доставляются пользователям сразу — достаточно просто перезагрузить страницу или выйти, а потом снова зайти в аккаунт. Но иногда для его работы нужно установить дополнительные библиотеки или использовать защищенные сетевые протоколы. 

**Мобильная версия (Mobile WEB)** – приложение, адаптированное под мобильную версию. Адаптирован, значит, что пользователю будет комфортно работать с web-приложением с мобильного устройства. Чаще всего, такие мобильные версии открываются по отдельному URL: https://m.auto.ru, https://www.m.avito.ru и многие другие.  

У браузера есть два основных способа определить, что необходимо открыть мобильную версию:  

1. Сервер выясняет, с какого браузера заходит пользователь. User Agent описывает наш браузер и его версию, передает информацию на сервер. Сервер определяет, что это мобильный браузер и редиректит пользователя на специальную версию.  

2. Информация о разрешении экрана “от” и “до” прописывается в верстке. Для каждого разрешения задаются определенные параметры, на которые и ориентируется браузер. 

## Адаптивная верстка

Адаптация под мобильные устройства реализуется с помощью **адаптивной верстки**. Дело в том, что мобильных устройств, представленных на рынке – огромное количество. И все они зачастую очень разные: у каждого устройства – своя диагональ экрана, свое разрешение. Все эти особенности важно учесть в используемых стилях (CSS) элементов на веб-странице. 

**Медиазапросы (media queries)** — правила CSS, которые позволяют управлять стилями элементов в зависимости от значений технических параметров устройств. Примеры медиазапросы CSS3: 

@media screen and (max-width: 640px) {  

    .wrap {  

    clear: both;  

    font-size: 1.3em; }  

}  

@media screen and (min-width: 800px) and (max-width: 1200px) {  

    .wrap {  

    clear: both;  

    font-size: 1.3em; }  

} 

### Верстка с jQuery 

**jQuery** — это JavaScript Framework. В коде прописываются условия применения того или иного стиля для конкретного расширения экрана. 

### Верстка с Bootstrap 

**Bootstrap** — HTML, CSS и JS фреймворк с открытым исходным кодом, который используется веб-разработчиками для быстрой верстки адаптивных дизайнов сайтов и веб-приложений. 

### Способы тестирования адаптивной верстки:  

* Эмуляторы устройств 

* DevTools 

Их мы рассмотрим чуть позже. 

## User-Agent 

**User-Agent** — это HTTP-заголовок, отправляемый клиентом серверу, который содержит строку, описывающую клиентский браузер, операционную систему, разрядность и другие характеристики клиента. Так сервер определяет, с какого браузера и версии мы зашли. 

## Тестирование верстки (PerfectPixel, Page Ruler) 

PerfectPixel Один из наиболее удобных способов проверить совпадение сайта и макета — работа со специальным плагином PerfectPixel: https://chrome.google.com/webstore/detail/perfectpixel-by-welldonec/dkaagdgjmgdmbnecmcefdhjekcoceebi?hl=ru  

Page Ruler – это инструмент для frontend разработчиков и тестировщиков, который помогает определить ширину, высоту и положение любого элемента на странице. 

https://chrome.google.com/webstore/detail/page-ruler/idhjfgkakeliobkfbijghiaklmiaheag?hl=ru 

К сожалению, в нашем распоряжении макеты отсутствуют, поэтому рассматривать подробнее эти инструменты мы не будем. 

## DevTools 

**DevTools** — это набор инструментов для веб-разработчиков, встроенных непосредственно в браузер. 

Этот набор инструментов позволяет: 
- тестировать, 
- отлаживать, 
- профилировать, 
- проверять код на соответствие стандартам, 
- и делать многое другое. 

Инструменты для разработчиков имеются во всех современных браузерах, таких как Chrome, Mozilla Firefox, Safari и многих других.

В браузере Edge инструмент разработчика можно вызвать, нажав на правую кнопку мыши - в контекстном меню выбрать "Проверить". Другой вариант: с помощью комбинации клавиш Fn + F12.

### Структура DevTools: 

* Панель **Elements** используется для выбора и редактирования любых HTML-элементов на странице. 

* Панель **Console** применяется для логирования диагностической информации в процессе разработки или взаимодействия с JavaScript на странице. 

* Панель **Recorder** применяется для записи, воспроизведения и измерения пользовательских действий. 

* Панель **Sources** показывает все файлы, подключенные к текущей странице. 

* Панель **Network** позволяет мониторить процесс загрузки страницы и всех файлов, которые подгружаются при ее загрузке. 

* Панель **Performance** отображает таймлайн использования сети, выполнения JavaScript-кода и загрузки памяти, применяется для оценки производительности работы страницы в целом. 

* Панель **Memory** используется для отслеживания нагрузки, которую оказывает выполнение JS-кода на систему

* Панель **Application** содержит инструменты для просмотра всех загруженных ресурсов и работы с ними: cookie, кеша приложения, изображений, шрифтов, таблиц стилей, локального хранилища

* На панели **Security** отображается информация о протоколе безопасности, данные о сертификате, если он есть, безопасной загрузке ресурсов. 

* Панель **Lighthouse**: анализ загружаемой страницы. 

## Инструмент для кросс-браузерного тестирования LambdaTest 

На сегодняшний  день существует много разных инструментов для кросс-браузерного тестирования, эмулириющие наиболее популярные браузеры и операционные системы. Для кросс-браузерного тестирования сайта РИВ ГОШ мы будем использовать LambdaTest. 

LambdaTest - онлайн-сервис, где можно запускать кроссбраузерные тесты для разных платформ. Например, можно выбрать, тестировать ли сайт в Firefox или Chrome, который работает на Windows или MacOS. 

Он также предоставляет интегрированный инструмент отладки, инструмент геолокации и позволяет проводить тестирование на локальном сайте — функции, которые помогут провести качественное тестирование без необходимости установки виртуальных машин и браузеров. 

На текущий момент функциональное тестирование сайта РИВ ГОШ проведено в браузере Edge, ОС Windows. Большинство пользователей интернет-магазина РИВ ГОШ используют операционные системы Windows и MacOS, поэтому адаптацию на Linux мы опустим. 

Осталось проверить:  

* Браузер Firefox на Windows 

* Браузер Safari на MacOS 

* Просмотр на мобильных устройствах:  

    * Браузеры Chrome, Firefox на Android 

    * Браузер Safari на iOS 

Для использования онлайн-инструмента LambdaTest необходимо пройти несложную регистрацию. После авторизации открывается страница, на которой можно выбрать параметры тестирования: браузер или мобильное приложение. Нам нужен браузер. Затем для выбора доступны следующие параметры: 

* WEB / Mobile WEB
* Браузер
* Версия браузера
* Операционная система
* Разрешение экрана

В бесплатной версии доступны 6 сессий по 10 минут. Этого вполне хватает, чтобы проверить работу основного функционала и UI.

Для тестирования сайта РИВ ГОШ мы пройдем несколько сессий со следующими параметрами: 

1. Desktop: FireFox, 105, Win10, 1920x1080 

2. Desktop: Safari, 15, Monterey, 1440x900

3. Mobile: Android, Samsung, Galaxy A71 5G, 11.0, Google Chrome

4. Mobile: Android, Samsung, Galaxy Tab A7, 11.0, Firefox

5. Mobile: iOS, iPhone 11, 15.4, Safari

6. Mobile: iOS, iPad Air 2, 11.3, Safari

Результаты проверок добавим в наши чек-листы, созданные при проверке функциональности сайта РИВ ГОШ. Для тестирования мобильной версии создадим отдельный чек-лист под названием "3.3 Мобильная версия". 
 
В ходе тестирования совместимости сайта РИВ ГОШ дефектов не обнаружено.

## Валидаторы HTML/CSS 

Валидатор HTML/CSS анализирует данные по URL приложения. Он проверяет правильность разметки веб-документов в HTML, совместимость с мобильными устройствами, работоспособность ссылок и многое другое. 

Правильный, валидный HTML-код — это код, написанный по спецификации W3C, в которой собраны стандарты и рекомендации по удобству и универсальности Всемирной сети. При написании кода стоит придерживаться этих правил. Они в целом довольно похожи на правила обычного, привычного нам русского языка. Чтобы страница быстрее загружалась, правильнее обрабатывалась, а поисковые машины верно понимали смысл всех тегов, важно писать валидный код. 

**World Wide Web** (http://validator.w3.org/) - валидатор, в котором тремя способами можно проверить приложение, найти неработающие alt- параметры и линки. 

Валидатор оценивает синтаксическую составляющую кода: смотрит на пропущенные или ошибочные теги, проверяет, верно ли закрыт тот или иной блок кода.

Результаты, выданные валидатором, делятся на две категории: предупреждения и ошибки. 

* *Предупреждения* — это какие-то незначительные неточности в коде, которые не сломают сайт, но не соответствуют стандартам кода.

* *Ошибки* — более серьёзные проблемы, которые могут повлиять на работу кода в целом. Это могут быть как грубые ошибки — например, неверная вставка тега в тег, неверное закрытие тега и т.д., так и менее значимые — отсутствие атрибута alt, незаполненный тег title.

### Как интерпретировать результаты проверки в валидаторе?

Просто исправлять всё, что там есть, чтобы осталось лишь зелёное уведомление о том, что всё правильно. Правильность кода — залог его корректной и долговечной работы, а также плюс при работе в команде с другими верстальщиками\backend-разработчиками.

Введем URL https://rivegauche.ru/ в соответствующее поле и проверим сайт.

В результате проверки сайта РИВ ГОШ выявлены 1 предупреждение и 227 ошибок.

В результате тестирования совместимости веб-приложения РИВ ГОШ дефектов не обнаружено.

## Источники: 

1. Тестирование веб-приложений и сайтов: полное руководство (internet-technologies.ru): https://www.internet-technologies.ru/articles/rukovodstvo-po-testirovaniyu-saytov.html?ysclid=la2r0r7jsi432180726#header-13292-15

2. 17 лучших инструментов для кроссбраузерной проверки / Полезное / Сайты и биржи фриланса. Обзоры фриланс бирж. Новости. Советы. Фриланс для начинающих. FREELANCE.TODAY:  https://freelance.today/poleznoe/17-luchshih-instrumentov-dlya-krossbrauzernoy-proverki.html?ysclid=lc29sscdz5204393021 

3. Лекция 6, ч.2. Тестирование web · Курс лекций "Тестирование програмного обеспечения" (gitbooks.io): https://sergeygavaga.gitbooks.io/kurs-lektsii-testirovanie-programnogo-obespecheni/content/lektsiya-6-ch2-testirovanie-web.html

4. Как проверить валидность HTML / Skillbox Media: https://skillbox.ru/media/code/kak_proverit_pravilnost_validnost_gotovogo_html_koda/?ysclid=lbzg9g9sjj811774402

5. Realtime Browser Test: https://lambdatest.com/

6. The W3C Markup Validation Service: https://validator.w3.org/