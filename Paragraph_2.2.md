# 2.2 Составление тест-кейсов 

## Что такое тест-кейс  

**Тестовый сценарий или тест-кейс** (test case) — это артефакт, описывающий совокупность шагов, конкретных условий и параметров, необходимых для проверки реализации тестируемой функции или её части. Он описывает:  

* какие шаги нужно выполнить;  

* какой результат должен быть у каждого шага. 

Важное правило: 1 шаг = 1 ожидаемый результат.

## Атрибуты тест-кейса на этапе проектирования тест-кейсов: 

* ID тест-кейса  

* Название  

* Предусловия (PreConditions) — список действий, которые приводят систему к состоянию пригодному для проведения основной проверки. Либо список условий, выполнение которых говорит о том, что система находится в пригодном для проведения основного теста состояния.   

* Шаги (Steps) — список действий, переводящих систему из одного состояния в другое, для получения результата, на основании которого можно сделать вывод о удовлетворении реализации, поставленным требованиям.  

* Ожидаемый результат (Expected result) — что по факту должны получить. У каждого шага - свой ожидаемый результат.

* Приоритет тест-кейса  

* Тестовые данные  

* Постусловия 

### Атрибуты тест-кейса на этапе исполнения тест-кейсов:  

* Фактический результат (необязательный атрибут)  

* Статус тест-кейса = резолюция 

## Резолюция (статус тест-кейса)

1. **passed** – кейс прошел проверку  

2. **failed** – кейс не прошел проверку  

3. **skipped** – пропуск проверки  

4. **blocked** – нет возможности проверить  

5. **untested** – еще не брали в работу 

## Приоритет в тест-кейсе 

**Приоритет** (Priority) показывает важность тест-кейса. Тестировщик по приоритету может отсортировать тест-кейсы на выполнение. 

Виды приоритетов: 

● крайне высокий  

● высокий  

● средний  

● низкий  

● крайне низкий 

## Алгоритм составления тест-кейсов  

1. Продумать сценарии  

2. Сформировать названия для тест-кейсов  

3. Определить для каждого сценария необходимые предусловия. Продумать и определить, какие новые возможности и сценарии появятся за счет новой фичи. Также определить, с какими из существующих функциональностей будет как-то пересекаться и взаимодействовать новая фича. 

4. В соответствии с требованиями описать шаги  

5. Строго в соответствии с ТЗ и макетами описать ожидаемый результат

6. При необходимости заполнить остальные атрибуты этого этапа

## Правила работы с тест-кейсами 

1. Один тест-кейс — одна проверка или один сценарий  

2. Заголовок точно описывает суть тест-кейса  

3. Точные названия для элементов приложения: кнопок, чекбоксов, элементов меню 

4. Простой технический стиль без объяснений базовых понятий работы ПО  

5. Нет пропущенных шагов: каждое действие вытекает из предыдущего  

6. Нет описания очевидных действий 

7. Нет зависимостей от других тест-кейсов (так как другие тест-кейсы могут быть удалены или в них могут измениться шаги) 

8. Нет дублей с другими тест-кейсами  

9. Обнаруженная ошибка становится очевидной  

10. Гибкость для модификации 

## Частые ошибки в тест-кейсах 

1. Заголовок тест-кейса отсутствует или сформулирован некорректно

2. Ссылки ведут на разные или недействительные требования  

3. Используются личные формы глаголов: «нажми», «перейдите», «укажи»  

4. Пунктуационные, орфографические, синтаксические ошибки 

5. «Выдумывание» особенностей поведения приложения без отсылки к требованиям  

6. Не описывается приготовление к выполнению тест-кейса (предусловие, без которого не выполнить текущий тест-кейс) 

7. Использование прошедшего или будущего времени в ожидаемых результатах 

8. Детализация, не соответствующая уровню функционального тестирования. Например, не нужно на уровне дымового тестирования проверять работоспособность каждой отдельной кнопки или прописывать некий крайне сложный, нетривиальный и редкий сценарий — поведение кнопок и без явного указания будет проверено множеством тест-кейсов, объективно задействующих эти кнопки, а сложному сценарию место на уровне тестирования критического пути или даже на уровне расширенного тестирования (в которых, напротив, недостатком можно считать излишнее обобщение без должной детализации). 

9. Полное дублирование (копирование) одного и того же тест-кейса на нескольких уровнях: дымового тестирования, тестирования критического пути, расширенного тестирования. 

## Преимущества и недостатки тест-кейсов 

Наличие тест-кейсов позволяет[1]:  

* Структурировать и систематизировать подход к тестированию 

* Вычислять метрики тестового покрытия и принимать меры по его увеличению 

* Отслеживать соответствие текущей ситуации плану (сколько примерно понадобится тест-кейсов, сколько уже есть, сколько выполнено из запланированного на данном этапе количества и т.д.).  

* Уточнить взаимопонимание между заказчиком, разработчиками и тестировщиками (тест-кейсы зачастую намного более наглядно показывают поведение приложения, чем это отражено в требованиях).  

* Хранить информацию для длительного использования и обмена опытом между сотрудниками и командами  

* Проводить регрессионное тестирование и повторное тестирование  

* Повышать качество требований (написание чек-листов и тест-кейсов — хорошая техника тестирования требований).  

* Быстро вводить в курс дела нового сотрудника, недавно подключившегося к проекту. 

Недостатки тест-кейсов:

* В сравнении с чек-листами требуют много времени на написание.  

* Сложно поддерживать. При изменении бизнес-логики, переименовании разделов и прочих изменениях, затрагивающих пользовательский интерфейс и сценарии использования системы, нужно актуализировать все тест-кейсы, затрагивающие измененную часть.  

## Инструменты для работы с тест-кейсами 

**TMS** - **Системы для работы с тест-кейсами** (test-case management system) — автоматизированные приложения, которые позволяют управлять тест-кейсами: 

* Jira + Zephyr  

* TestRail  

* Allure  

* Test IT  

* TestLink  

* и другие… 

Не имеет смысла заучивать, как работать с тест-кейсами в том или ином инструментальном средстве — принцип везде един, и соответствующие навыки нарабатываются буквально за пару дней. Что на текущий момент важно понимать, так это общий набор функций, реализуемых такими инструментальными средствами: 

* создание тест-кейсов и наборов тест-кейсов;  

* выполнение тест-кейсов и запись результатов. 

* контроль версий документов с возможностью определить, кто внёс те или иные изменения, и отменить эти изменения, если требуется (защита тест-кейсов);  

* формирование и отслеживание реализации плана тестирования, сбор и визуализация разнообразных метрик, генерирование отчётов;  

* интеграция с системами управления дефектами, фиксация взаимосвязи между выполнением тест-кейсов и созданными отчётами о дефектах;  

* интеграция с системами управления проектами, отслеживание требований и других проектных документов. 

* интеграция с инструментами автоматизированного тестирования, управление выполнением автоматизированных тест-кейсов 

## Ценность тест-кейсов и чек-листов 

* Структурируют и систематизируют подход к тестированию.  

* Основа для метрик тестового покрытия.  

* Основа для увеличения тестового покрытия.  

* Показатель соответствия ситуации плану.  

* Поддерживают взаимопонимание между заказчиком, разработчиками и тестировщиком. ● Хранят информацию для длительного использования и обмена опытом между сотрудниками и командами.  

* Основа регрессионного тестирования. 

## Наборы тест-кейсов test case, test suite, test plan, test run 

**Test case** — атомарный элемент тест-плана.  

**Test suite** — список кейсов, объединенных общим фактором  

**Test plan** — список test suite-ов, выбранных для теста  

**Test run** — выполнение test plan-а (прогон тест-кейсов) 

При составлении тест-кейса важно помнить, что тест-кейс должен быть понятен не только его автору, но и любому другому человеку, который будет проводить тестирование по этому тест-кейсу. Более того, спустя несколько месяцев автор также может забыть, что подразумевал под той или иной формулировкой, поэтому лучше сразу постараться сделать тест-кейс ясным и понятным.

Но и здесь нужно избегать и другой крайности — когда шаги тест-кейса слишком детализируются. Излишняя детализация ведет к усложнению поддерживаемости тест-кейса. В общем, нужно искать золотую середину.  

## Принципы построения наборов тест-кейсов 

Теперь — о самом главном: как формировать наборы тест-кейсов[2]. Правильный ответ звучит очень кратко: логично. Единственная задача наборов — повысить эффективность тестирования за счёт ускорения и упрощения выполнения тест-кейсов, увеличения глубины исследования некоей области приложения или функциональности, следования типичным пользовательским сценариям или удобной последовательности выполнения тест-кейсов и т.д. 

Набор тест-кейсов всегда создаётся с какой-то целью, на основе какой-то логики, и по этим же принципам в набор включаются тесты, обладающие подходящими свойствами. Если же говорить о наиболее типичных подходах к составлению наборов тест-кейсов, то можно обозначить следующее:  

* На основе чек-листов. Посмотрите внимательно на примеры чек-листов, которые мы разработали в соответствующем разделе: каждый пункт чек-листа может превратиться в несколько тест-кейсов — и вот мы получаем готовый набор.  

* На основе разбиения приложения на модули и подмодули. Для каждого модуля (или его отдельных подмодулей) можно составить свой набор тест-кейсов.  

* По принципу проверки самых важных, менее важных и всех остальных функций приложения (именно по этому принципу мы составляли примеры чек-листов).  

* По принципу группировки тест-кейсов для проверки некоего уровня требований или типа требований, группы требований или отдельного требования.  

* По принципу частоты обнаружения тест-кейсами дефектов в приложении (например, мы видим, что некоторые тест-кейсы раз за разом завершаются неудачей, значит, мы можем объединить их в набор, условно названный «проблемные места в приложении»).  

* По архитектурному принципу: наборы для проверки пользовательского интерфейса и всего уровня представления, для проверки уровня бизнес-логики, для проверки уровня данных.  

* По области внутренней работы приложения, например: «тест-кейсы, затрагивающие работу с базой данных», «тест-кейсы, затрагивающие работу с файловой системой», «тест-кейсы, затрагивающие работу с сетью», и т.д.  

* По видам тестирования. 

Этот список не нужно помнить наизусть - это только примеры. Важен принцип: если мы видим, что выполнение некоторых тест-кейсов в виде набора принесёт пользу, то следует создать такой набор. 

Как мы отмечали ранее, в силу множества экономических и технических причин, а также в условиях ограниченного количества времени мы не можем выполнить «все тесты, что придут нам в голову» (да ещё и многократно) — приходится тщательно выбирать, что, как и какими способами мы будем тестировать, а какие проверки можно опустить. Как бы мы ни старались, мы не можем провести исчерпывающее тестирование.  

Однако С. Куликов [3] предлагает достаточно простой алгоритм, позволяющий нам создавать эффективные проверки даже в таких условиях. Он говорит, что, приступая к продумыванию чек-листа, тест-кейса или набора тест-кейсов, нужно задать себе следующие вопросы и получить чёткие ответы:

* Что перед вами? Если вы не понимаете, что вам предстоит тестировать, вы не уйдёте дальше бездумных формальных проверок.  

* Кому и зачем оно нужно (и насколько это важно)? Ответ на этот вопрос позволит вам быстро придумать несколько характерных сценариев использования того, что вы собираетесь тестировать.  

* Как оно обычно используется? Это уже детализация сценариев и источник идей для позитивного тестирования (их удобно оформить в виде чек-листа).  

* Как оно может сломаться, т.е. начать работать неверно? Это также детализация сценариев использования, но уже в контексте негативного тестирования (их тоже удобно оформить в виде чек-листа).  

К этому алгоритму можно добавить ещё небольшой перечень универсальных рекомендаций, которые позволят оптимизировать процесс тестирования:  

* Начинайте как можно раньше — уже с момента появления первых требований можно заниматься их тестированием и улучшением, можно писать чек-листы и тест-кейсы, можно уточнять план тестирования, готовить тестовое окружение и т.д.  

* Если вам предстоит тестировать что-то большое и сложное, разбивайте его на модули и подмодули, функциональность подвергайте функциональной декомпозиции — т.е. добейтесь такого уровня детализации, при котором вы можете без труда удержать в голове всю информацию об объекте тестирования.  

* Обязательно пишите чек-листы. Если вам кажется, что вы сможете запомнить все идеи и потом легко их воспроизвести, вы ошибаетесь. Исключений не бывает.  

* По мере создания чек-листов, тест-кейсов и т.д. прямо в текст вписывайте возникающие вопросы. Когда вопросов накопится достаточно, соберите их отдельно, уточните формулировки и обратитесь к тому, кто может дать ответы.  

* Если используемое вами инструментальное средство позволяет использовать косметическое оформление текста — используйте (так текст будет лучше читаться), но старайтесь следовать общепринятым традициям и не раскрашивать каждое второе слово в свой цвет, шрифт, размер и т.д.  

* Используйте технику беглого просмотра для получения отзыва от коллег и улучшения созданного вами документа.  

* Планируйте время на улучшение тест-кейсов (исправление ошибок, доработку по факту изменения требований и т.д.).  

* Начинайте проработку (и выполнение) тест-кейсов с простых позитивных проверок наиболее важной функциональности. Затем постепенно повышайте сложность проверок, помня не только о позитивных, но и о негативных проверках.  

* Помните, что в основе тестирования лежит цель. Если вы не можете быстро и просто сформулировать цель созданного вами тест-кейса, вы создали плохой тест-кейс.  

* Избегайте избыточных, дублирующих друг друга тест-кейсов. Минимизировать их количество вам помогут техники тест-дизайна (о них мы поговорим позднее).  

* Помните, что очень многие тест-кейсы требуют отдельной подготовки (предусловия), которую нужно описать в соответствующем поле тест-кейса.  

* Несколько позитивных тест-кейсов можно безбоязненно объединять, но объединение негативных тест-кейсов почти всегда запрещено.  

* Подумайте, как можно оптимизировать созданный вами тест-кейс (набор тест-кейсов и т.д.) так, чтобы снизить трудозатраты на его выполнение.  

* Перед тем, как отправлять финальную версию созданного вами документа, ещё раз перечитайте написанное (в доброй половине случаев найдёте опечатку или иную недоработку).  

## Краткое подведение итогов  

1. Тест-кейс — это инструмент тестировщика, предназначенный для документирования и проверки одного или более ожидаемых результатов. У каждого шага должен быть ожидаемый результат.  

2. Шаги — это часть тест-кейса, ведущая исполнителя тест-кейса к фактическому результату. Излишняя детализация может осложнить поддержку, а излишнее абстрагирование привести к непониманию того, как исполнить тест-кейс.  

3. Исполнение тест-кейса, как правило, завершается либо положительным (passed), либо отрицательным (failed) результатом. Отрицательный результат означает, что мы нашли дефект, который необходимо занести в баг-трекинговую систему (об этом поговорим позднее). 

4. Тест-кейс должен быть независим от других тест-кейсов из того же или любого другого тест-комплекта.  

5. Поддерживаемость тест-кейса — это легкость и удобство, с которыми он может быть изменен. Поддерживаемость тест-кейса — одна из основных формальных вещей при создании или модификации тест-кейса.  

6. Создавая или модифицируя тест-кейсы, мы всегда должны помнить о коллеге, который будет их исполнять после нас.

Источники:

https://habr.com/ru/post/549054/3

[1] С. Куликов. Тестирование программного обеспечения. Базовый курс. 3-е издание. Версия книги 3.0.11 от 16.07.2021. - C. 118.

[2] С. Куликов. Тестирование программного обеспечения. Базовый курс. 3-е издание. Версия книги 3.0.11 от 16.07.2021. - C. 147.

[3] С. Куликов. Тестирование программного обеспечения. Базовый курс. 3-е издание. Версия книги 3.0.11 от 16.07.2021. - C. 150-151.